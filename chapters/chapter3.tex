\chapter{Webové technologie}
\label{chap:languages}

\textbf{Značkovací jazyky} (anglicky \textit{Markup languages}) jsou formální jazyky, které umožňují v rámci rozšíření textu v přirozeném jazyce syntakticky rozlišit jednotlivé konstrukce pro vymezení struktury textu a jeho významu; dále umožňují ukládat například informace o původu, obsahu a autorských právech dokumentu \cite{modern-markup}.

Příklady nejznámějších značkovacích jazyků---

\begin{itemize}
    \item XML (\textit{eXtensible Markup Language}) -- vysoce flexibilní metajazyk určený pro popis různých typů dat, které jsou čitelné jak člověkem, tak počítačem.
    \item HTML (\textit{HyperText Markup Language}) -- jazyk určený pro publikaci stránek na webu.
    \item XHTML (\textit{eXtensible HyperText Markup Language}) -- stejně jako HTML slouží pro popis dat webových dokumentů avšak za použití XML syntaxe.
    \item \TeX, \LaTeX -- jazyky určené převážně pro sazbu matematických a akademických dokumentů.
    \item SVG (\textit{Scalable Vector Graphics}) -- slouží pro popis vektorových obrázků s využitím XML syntaxe.
    \item JSON (\textit{JavaScript Object Notation}) -- značkovací jazyk odvozen z JavaScriptu, který je používán pro ukládání a výměnu textových informací. Na rozdíl od XML je čitelnější a méně datově náročný (viz srovnání XML dokumentu \ref{example:xml} a JSON dokumentu \ref{example:json}).
    \item Markdown -- určený pro konverzi textu do méně čitelného HTML. Markdown je využíván převážně pro sazbu uživatelských diskuzí a komentářů webových aplikací.
\end{itemize}

\begin{example}
    \centering
    \begin{lstlisting}
<?xml version="1.0" encoding="ISO-8859-1"?>
<product id="123">
    <name>Ferrari F430</name>
    <manufacturer>Ferrari</manufacturer>
    <class>Sports car</class>
</product>
    \end{lstlisting}
    \caption{XML dokument}
    \label{example:xml}
\end{example}

\begin{example}
    \centering
    \begin{lstlisting}
{
    "product": {
        "id": "123",
        "name": "Ferrari F430",
        "manufacturer": "Ferrari",
        "class": "Sports car",
    }
}
    \end{lstlisting}
    \caption{JSON dokument}
    \label{example:json}
\end{example}

\textbf{Stylovací jazyky} (anglicky \textit{Stylesheets languages}) jsou formální jazyky, které umožňují definovat strukturu XML a HTML dokumentů, jejich layout nebo vizuální podobu. Na rozdíl od značkovacích jazyků popisují jak mají být jednotlivé elementy vykresleny (např. na displejích nebo v tisku).

Příklady stylovacích jazyků---

\begin{itemize}
    \item CSS (\textit{Cascading Style Sheets}) -- jazyk specificky určený pro stylování webových dokumentů.
    \item XSL (\textit{eXtensible Stylesheet Language}) -- rodina jazyků určených pro prezentaci a transformaci XML dokumentů.
    \item SASS (\textit{Syntactically Awesome Stylesheets}) -- nestandardizovaný stylovací jazyk, který rozšiřuje CSS o dynamické chování (umožňuje definovat například proměnné, mixiny nebo funkce).
    \item LESS (\textit{Leaner CSS}) -- alternativa SASS.
\end{itemize}

\section{HTML}
\label{sec:html}

HTML se vyvíjí již od roku 1990, od roku 1995 jako W3C standard, během této doby prošlo mimořádným vývojem, díky kterému dnes mohou autoři vytvářet komplexní stránky obsahující audio, video nebo 3D animace.

Každá HTML stránka musí začínat deklarací doctypu, který stanovuje verzi HTML dokumentu. Následuje kořenový element \texttt{<html>}, který uzavírá zbytek dokumentu. Uvnitř kořenového elementu musí být deklarován element \texttt{<head>}, který slouží pro popis dokumentu (typicky zahrnuje například CSS styly) a element \texttt{<body>}, který je určený pro definici viditelného obsahu (Příklad \ref{example:html}).

\begin{example}
    \centering
    \begin{lstlisting}
<!DOCTYPE html>
<html>
    <head> ... </head>
    <body> ... </body>
</html>
    \end{lstlisting}
    \caption{Základní podoba HTML stránky.}
    \label{example:html}
\end{example}

\subsection{HTML~5}

HTML~5 je zcela nový připravovaný W3C standard pro tvorbu webových stránek, který nahrazuje více než 10 let starý standard HTML~4.01. Mezi některé nové nástroje a vylepšení patří---

\begin{itemize}
    \item zjednodušený doctype -- \texttt{<!DOCTYPE html>}
    \item podpora multimédií -- elementy \texttt{<video>} a \texttt{<audio>}
    \item podpora vektorových obrázků -- elementy \texttt{<canvas>} a \texttt{<svg>}
    \item nové sémantické elementy -- například \texttt{<header>}, \texttt{<footer>} a \texttt{<nav>}
    \item nové HTML atributy -- například \texttt{placeholder} nebo \texttt{autocomplete}
    \item podpora akcelerace grafickou kartou a knihovna WebGL\footnotemark[1]
    \item pokročilejší podpora mobilních zařízení
\end{itemize}

\footnotetext[1]{\textit{Web-based Graphics Library} -- jedná se o náhradu platformy Adobe Flash, která umožňuje integraci animací a multimediálního obsahu do webových stránek. WebGL využívá JavaScript, čímž odpadá nutnost instalace dodatečného softwaru.}

\section{CSS}
\label{sec:css}

Cílem CSS je oddělit formátování od obsahu webového dokumentu. V prvních verzích HTML vznikly elementy jako \texttt{<font>} nebo \texttt{<strike>}, které sloužili pro formátování dokumentu. V pozdějších verzích se ukázala nepřehlednost a objemnost této strategie. Díky tomu bylo společně s HTML~4 představeno CSS, které umožňuje definici stylů následujícími způsoby---

\begin{itemize}
    \item pomocí HTML atributu \texttt{style}
    \item pomocí HTML elementu \texttt{<style>} v hlavičce dokumentu
    \item nalinkováním externího CSS souboru v hlavičce dokumentu
\end{itemize}

\subsection{CSS~3}

CSS~3 je nová verze W3C standardu pro CSS. Přesto, že se stále jedná o nedokončenou specifikaci, majoritní prohlížeče již většinu nových CSS vlastností podporují. Mezi některé nové vlastnosti, pravidla a selektory CSS~3 patří---

\begin{itemize}
    \item vlastnost \texttt{border-radius} -- nastavuje rádius rámečku
    \item vlastnost \texttt{box-shadow} -- nastavuje stín objektu
    \item vlastnost \texttt{transition} -- přidává efekt animace při změně stylu
    \item selektor \texttt{:first-of-type} a \texttt{:last-of-type} -- označí každého prvního (resp. posledního) potomka selektovaného elementu, třídy nebo identifikátoru
    \item selektor \texttt{:nth-child(n)} -- označí každý HTML element, který je $n$-tým potomkem rodičovského elementu, třídy nebo identifikátoru
    \item selektor \texttt{[attr*=value]} -- označí každý element, jehož atribut \texttt{attr} obsahuje podřetězec \texttt{value}
    \item pravidlo \texttt{@font-face} -- umožňuje použití libovolných fontů (viz příklad \ref{example:font-face}.)
\end{itemize}

\begin{example}
    \centering
    \begin{lstlisting}[language=css]
@font-face {
  font-family: "Museo Slab";
  src: url('../museo/regular.eot');
  src: url('../museo/regular.eot?iefix') format('eot'),
       url('../museo/regular.woff') format('woff'),
       url('../museo/regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}
    \end{lstlisting}
    \caption{Příklad použítí \texttt{@font-face}}
    \label{example:font-face}
\end{example}

\section{LESS}
\label{sec:less}

Úkolem LESS je zredukovat opakující se části kódu, zpřehlednit a usnadnit psaní CSS stylů. LESS je preprocesor, který zavádí do CSS některé vlastnosti známé z programovacích jazyků jako jsou proměnné, funkce nebo mixiny (makra). LESS lze překompilovat na CSS jak na straně klienta (prostřednictvím JavaScriptu), tak na straně serveru.

\begin{example}
    \centering
    \begin{lstlisting}[language=css]
// import jineho souboru, lze importovat
// jak less, tak i css soubory
@import "main.less";

// definice promenne
@fontColor: #808080;

// definice mixinu
.pretty-link(@fontSize: 16px) {
  color: @fontColor;
  font-size: @fontSize;
  &:hover {
    text-decoration: none;
  }
}

.link {
  .pretty-link(18px);
  // pouziti funkce darken
  color: darken(@fontColor, 20%)
}
    \end{lstlisting}
    \caption{Ukázka syntaxe LESS}
    \label{example:less-css}
\end{example}

\section{Twitter Bootstrap}
\label{sec:bootstrap}

Twitter Bootstrap (dále jen Bootstrap) je sada CSS stylů, ikonek a JavaScriptových knihoven, které urychlují vývoj webových aplikací. Bootstrap byl primárně vytvořen, aby potlačil nekonzistenci mezi vývojáři v rámci společnosti Twitter. V roce 2011 byl Bootstrap uvolněn jako open-source projekt a nyní se jedná o jeden z nejpopulárnějších webových rámců.

Větší část Bootstrapu je napsaná v LESS, primárně je však dostupná zkompilovaná verze v CSS. Bootstrap má relativně vyspělou podporu technologií HTML~5 a CSS~3, vyžaduje tedy deklaraci HTML~5 doctypu. JavaScriptové komponenty jsou postavené na knihovně jQuery\footnotemark[2]. Některé nástroje a komponenty Bootstrapu jsou popsány v následujících odstavcích.

\footnotetext[2]{jQuery je open-source JavaScriptová knihovna, určená především pro manipulaci s HTML dokumenty.}

\subsection{Grid systém a layout}

Grid systém rozděluje horizontální a vertikální prostor webové stránky na části, kde může být umístěn text, nadpisy, obrázky nebo reklamní elementy. Implicitní grid systém Bootstrapu je rozdělen na 12 sloupců s šířkou 940$px$ pro fixní layout.

Pro vytvoření základního layoutu HTML stránky jsou v Bootstrapu určené třídy \texttt{.span}$m$ a \texttt{.row}, kde proměnná $m$ definuje šířku bloku. Šířku bloku \texttt{.span} lze vypočítat ze vzorce---
$$940px * \frac{m}{12}$$
Třída \texttt{.row} slouží pouze pro zaobalení dědičných elementů (viz příklad \ref{example:basic-layout}).

\begin{example}
    \centering
    \begin{lstlisting}
<div class="row">
  <div class="span9">
    ...
  </div>
  <div class="span3">
    ...
  </div>
</div>
    \end{lstlisting}
    \caption{Základní layout stránky rozdělený na dva sloupce.}
    \label{example:basic-layout}
\end{example}

V rámci komplexnějšího layoutu lze použít třídy \texttt{.offset}$m$, které definují odsazení bloku od levého okraje. Proměnná $m$ představuje úroveň odsazení.

\subsection{Responzivní design}

Responzivní design je typ dokumentu, který reaguje na své prostředí \cite{responsive-design}. Jedná se o metodu, díky které lze přizpůsobit HTML stránky dle šířky displeje zařízení. Tato technika je v posledních letech populární především díky oblíbenosti mobilních zařízení. Nevýhodou responzivního designu jsou vyšší požadavky na objem přenášených dat.

V Bootstrapu lze povolit responzivní design zahrnutím náležitého CSS stylu a meta elementu uvnitř HTML hlavičky dokumentu. Implicitně je responzivní layout rozdělen pro displeje s šířkou nad 1200$px$, nad 980$px$, nad 768$px$, pod 767$px$ a pod 480$px$.

\subsection{Typografie}

Pro úpravu typografie v Bootstrapu je určený soubor \texttt{variables.less}, kde lze nastavit velikost písma, velikost odstavce, řádkování a další komponenty (Příklad \ref{example:bootstrap-variables}). Pro zarovnání textu slouží třídy \texttt{.text-left}, \texttt{.text-center} a \texttt{.text-right}.

\begin{example}
    \centering
    \begin{lstlisting}
@baseFontSize:          16px;
@baseFontFamily:        Arial, sans-serif;
@baseLineHeight:        23px;
@altFontFamily:         Georgia, serif;
    \end{lstlisting}
    \caption{Ukázka souboru \texttt{variables.less}.}
    \label{example:bootstrap-variables}
\end{example}

\subsection{Formuláře}

Formuláře lze konstruovat dvěma způsoby. První způsob je omezen na použití HTML elementu \texttt{<form>}, který lze používat standardním způsobem. Druhý způsob vyžaduje jednak použití třídy \texttt{.form-inline} nebo \texttt{.form-horizontal} na \texttt{<form>} elementu, dále je nutné, aby byly dílčí komponenty obsažené ve formuláři správně uspořádány (viz příklad \ref{example:form}).

\begin{example}
    \centering
    \begin{lstlisting}
<form class="form-inline">
  <input type="text" class="input-small">
  <label class="checkbox">
    <input type="checkbox"> Remember me
  </label>
  <button type="submit" class="btn">Sign in</button>
</form>
    \end{lstlisting}
    \caption{Vertikálně uspořádaný formulář.}
    \label{example:form}
\end{example}

\subsection{Výchozí tlačítka}

Styly tlačítek lze aplikovat použitím třídy \texttt{.btn}, typicky na element \texttt{<a>} nebo \texttt{<button>}. Pro sémantické rozlišení akce tlačítka jsou v Bootstrapu určené třídy \texttt{.btn-pirmary}, \texttt{.btn-info}, \texttt{.btn-success}, \texttt{.btn-link}, \texttt{.btn-danger} a \texttt{.btn-warning}, které musí být aplikovány zároveň s třídou \texttt{.btn}.

\begin{example}
    \centering
    \begin{lstlisting}
<button class="btn" type="button">Create</button>
<a href="/login" class="btn btn-primary">Sign in</a>
    \end{lstlisting}
    \caption{Ukázka použití tlačítek.}
    \label{example:form}
\end{example}

Velikost tlačítek lze upravit třídami \texttt{.btn-large}, \texttt{.btn-small} a \texttt{.btn-mini}.

\subsection{Navigační panel}

Součástí Bootstrapu je jednoduchý navigační panel. Existují dva způsoby použití tohoto panelu---fixní a statický, které se liší ve způsobu zobrazení na stránce. Fixní (třída \texttt{.navbar-fixed-top}) je viditelný na celé stránce, statický (třída \texttt{.navbar-static-top}) je naopak viditelný pouze na vrcholu stránky.

\begin{example}
    \centering
    \begin{lstlisting}
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    ...
  </div>
</div>
    \end{lstlisting}
    \caption{Fixní navigační panel.}
    \label{example:form}
\end{example}

\subsection{Modální okna}

Modální okna jsou JavaScriptem vykreslené dialogy určené pro zobrazení doplňkových informací nebo komponent stránky (například formulářů), které jsou při běžné práci neviditelné.

\begin{example}
    \centering
    \begin{lstlisting}
<a href="#modal" data-toggle="modal">Open Modal</a>

<div id="modal" class="modal hide fade">
  <div class="modal-header"> ... </div>
  <div class="modal-body"> ... </div>
  <div class="modal-footer"> ... </div>
</div>
    \end{lstlisting}
    \caption{Modální okno.}
    \label{example:form}
\end{example}
