\chapter{Webové technologie}
\label{chap:languages}

\textbf{Značkovací jazyky} (anglicky \textit{Markup languages}) jsou formální jazyky, které umožňují v rámci rozšíření textu v přirozeném jazyce syntakticky rozlišit jednotlivé konstrukce pro vymezení struktury textu a jeho významu; dále umožňují ukládat například informace o původu, obsahu a autorských právech dokumentu \cite{modern-markup}.

Příklady nejrozšířenějších značkovacích jazyků:

\begin{itemize}
    \item XML (\textit{eXtensible Markup Language}) -- vysoce flexibilní metajazyk určený pro popis nejrůznějších typů dat, jež jsou čitelné jak člověkem, tak počítačem.
    \item HTML (\textit{HyperText Markup Language}) -- jazyk určený pro publikaci stránek na webu.
    \item XHTML (\textit{eXtensible HyperText Markup Language}) -- stejně jako HTML slouží pro popis dat webových dokumentů avšak za použití XML syntaxe.
    \item \TeX, \LaTeX -- jazyky určené převážně pro sazbu matematických a akademických dokumentů.
    \item SVG (\textit{Scalable Vector Graphics}) -- slouží pro popis vektorových obrázků s využitím XML syntaxe.
    \item JSON (\textit{JavaScript Object Notation}) -- značkovací jazyk odvozen z JavaScriptu, který je používán pro ukládání a přenos textových informací. Na rozdíl od XML je čitelnější a méně datově objemný (viz srovnání XML dokumentu \ref{example:xml} a JSON dokumentu \ref{example:json}).
    \item Markdown -- minimalistický značkovací jazyk speciálně navržen pro sazbu kratších textů. Markdown používají převážně systémy pro správu obsahu na webu\footnote{Systémy pro správu obsahu (anglicky \textit{Content Management System}, zkráceně CMS) jsou systémy primárně určené pro publikaci, editaci a modifikaci obsahu na webu bez nutnosti porozumění složitější syntaxe značkovacích jazyků.}.
\end{itemize}

\begin{example}
    \centering
    \begin{lstlisting}
<?xml version="1.0" encoding="ISO-8859-1"?>
<product id="123">
    <name>Ferrari F430</name>
    <class>Sports car</class>
</product>
    \end{lstlisting}
    \caption{XML dokument}
    \label{example:xml}
\end{example}

\begin{example}
    \centering
    \begin{lstlisting}
{
    "product": {
        "id": "123",
        "name": "Ferrari F430",
        "class": "Sports car",
    }
}
    \end{lstlisting}
    \caption{JSON dokument}
    \label{example:json}
\end{example}

\textbf{Stylovací jazyky} (anglicky \textit{Stylesheets languages}) jsou formální jazyky, které umožňují definovat strukturu, význam a vizuální podobu XML nebo HTML dokumentů. Na rozdíl od značkovacích jazyků popisují jak mají být jednotlivé elementy vykresleny (např. na displejích nebo v tisku).

Příklady stylovacích jazyků:

\begin{itemize}
    \item CSS (\textit{Cascading StyleSheets}) -- jazyk specificky určený pro stylování webových dokumentů.
    \item XSL (\textit{eXtensible Stylesheet Language}) -- rodina jazyků určených pro prezentaci a transformaci XML dokumentů.
    \item SASS (\textit{Syntactically Awesome StyleSheets}) -- nestandardizovaný stylovací jazyk, který rozšiřuje CSS o dynamické chování (umožňuje definovat například proměnné, mixiny nebo funkce).
    \item LESS (\textit{Leaner CSS}) -- alternativa SASS.
\end{itemize}

\section{HTML}
\label{sec:html}

HTML se vyvíjí již od roku 1990, od roku 1995 jako W3C standard, během této doby prošlo mimořádným vývojem, díky kterému dnes mohou autoři vytvářet komplexní stránky obsahující audio, video nebo 3D animace.

Každá HTML stránka musí začínat deklarací \textit{doctypu}, který stanovuje verzi dokumentu. Následuje kořenový element \texttt{<html>}, který uzavírá zbytek dokumentu. Obsah kořenového elementu začíná deklarací \texttt{<head>} elementu, který slouží pro popis dokumentu (typicky zahrnuje například CSS styly), následuje element \texttt{<body>}, který definuje viditelný obsah na stránce (viz příklad \ref{example:html}).

\begin{example}
    \centering
    \begin{lstlisting}
<!DOCTYPE html>
<html>
    <head> ... </head>
    <body> ... </body>
</html>
    \end{lstlisting}
    \caption{Základní struktura HTML~5 dokumentu.}
    \label{example:html}
\end{example}

\subsection{HTML~5}

HTML~5 je zcela nový W3C standard pro tvorbu webových stránek, který nahrazuje více než deset let starý standard HTML~4.01. Ačkoliv je tento nový standard stále ve fázi \textit{Candidate Recommendation} (zkráceně CR), je webovými prohlížeči široce podporován. Mezi některé nové nástroje a vylepšení patří:

\begin{itemize}
    \item zjednodušený doctype -- \texttt{<!DOCTYPE html>}
    \item podpora multimédií -- elementy \texttt{<video>} a \texttt{<audio>}
    \item podpora vektorových obrázků -- elementy \texttt{<canvas>} a \texttt{<svg>}
    \item nové sémantické elementy -- například \texttt{<header>}, \texttt{<footer>} a \texttt{<nav>}
    \item nové HTML atributy -- například \texttt{placeholder} nebo \texttt{autocomplete}
    \item podpora akcelerace grafickou kartou a knihovna WebGL\footnote{\textit{Web-based Graphics Library} -- jedná se o náhradu platformy Adobe Flash, která umožňuje integraci animací a multimediálního obsahu na webových stránkách. WebGL využívá JavaScript, čímž na straně klienta odpadá nutnost instalace dodatečného softwaru.}
    \item pokročilejší podpora mobilních zařízení
\end{itemize}

\section{CSS}
\label{sec:css}

Cílem CSS je oddělit formátování od obsahu HTML dokumentu. V prvních verzích HTML byly pro fyzické formátování ustanoveny speciální elementy (například \texttt{<font>} nebo \texttt{<strike>}). Později se však projevila nepřehlednost a objemnost této strategie a tak byly společně s HTML~4 představeny kaskádové styly (CSS), které umožňují definici fyzického formátu dokumentu s použitím CSS syntaxe následujícími způsoby:

\begin{itemize}
    \item pomocí HTML atributu \texttt{style};
    \item pomocí HTML elementu \texttt{<style>} v hlavičce dokumentu;
    \item nalinkováním externího CSS souboru v hlavičce dokumentu.
\end{itemize}

\subsection{CSS~3}

CSS~3 je nová verze W3C standardu pro kaskádové styly. Přesto, že se stále jedná o nedokončenou specifikaci, majoritní prohlížeče již většinu nových CSS nástrojů podporují. Mezi některé nové vlastnosti, pravidla a selektory nového standardu patří:

\begin{itemize}
    \item vlastnost \texttt{border-radius} -- umožňuje nastavit rádius rámečku;
    \item vlastnost \texttt{box-shadow} -- umožňuje vytvořit stín jakéhokoli objektu;
    \item vlastnost \texttt{transition} -- umožňuje nastavit efekt animace při změně stylu (například při aktivaci tlačítka);
    \item selektor \texttt{:first-of-type} a \texttt{:last-of-type} -- slouží pro označení každého prvního (resp. posledního) potomka označovaného elementu;
    \item selektor \texttt{:nth-child(n)} -- slouží pro označení každého HTML elementu, který je $n$-tým potomkem rodičovského elementu;
    \item selektor \texttt{[attr*=value]} -- slouží pro označení každého elementu, jehož atribut \texttt{attr} obsahuje podřetězec \texttt{value};
    \item pravidlo \texttt{@font-face} -- umožňuje definici vlastního fontu, který nemusí být přítomen na klientském počítači.
\end{itemize}

\begin{example}
    \centering
    \begin{lstlisting}[language=css]
@font-face {
  font-family: "Museo Slab";
  src: url('../museo/regular.eot');
  src: url('../museo/regular.eot?iefix') format('eot'),
       url('../museo/regular.woff') format('woff'),
       url('../museo/regular.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}
    \end{lstlisting}
    \caption{Příklad použití nového pravidla \texttt{@font-face}.}
    \label{example:font-face}
\end{example}

\section{LESS}
\label{sec:less}

Úkolem LESS je zredukovat opakující se části kódu, zpřehlednit a usnadnit psaní kaskádových stylů. LESS je \textit{preprocesor}, který zavádí do CSS některé vlastnosti známé z jiných programovacích jazyků jako jsou proměnné, funkce nebo makra (mixiny). Soubor LESS lze překompilovat na CSS jak na straně klienta (prostřednictvím JavaScriptu), tak na straně serveru (s pomocí Ruby, Pythonu a dalších jazyků).

\begin{example}
    \centering
    \begin{lstlisting}[language=css]
// import externiho souboru
@import "main.less";

// definice promenne
@fontColor: #808080;

// definice mixinu
.pretty-link(@fontSize: 16px) {
  color: @fontColor;
  font-size: @fontSize;
  &:hover {
    text-decoration: none;
  }
}

.link {
  .pretty-link(18px);
  // pouziti funkce darken
  color: darken(@fontColor, 20%)
}
    \end{lstlisting}
    \caption{Ukázka syntaxe preprocesoru LESS.}
    \label{example:less-css}
\end{example}

\section{Twitter Bootstrap}
\label{sec:bootstrap}

Twitter Bootstrap (dále jen Bootstrap) je sada kaskádových stylů, ikonek a JavaScriptových knihoven, které urychlují vývoj webových aplikací. Bootstrap byl primárně vytvořen, aby potlačil nekonzistence mezi vývojáři ve společnosti Twitter\footnote{Twitter je sociální síť, která umožňuje jeho uživatelům posílat a číst krátké textové zprávy do 140 znaků (tzv. \textit{tweety}).}. V roce 2011 byl Bootstrap uvolněn jako open-source\footnote{Open-source, neboli otevřený software je typ softwaru, jehož zdrojový kód je přístupný jak technicky tak licenčně.} projekt a nyní se jedná o nejpopulárnější webový rámec na GitHubu\footnote{GitHub je webová služba určená pro distribuovaný vývoj softwaru.}.

Bootstrap má relativně vyspělou podporu technologií HTML~5 a CSS~3. Větší část Bootstrapu je napsaná v preprocesoru LESS, primárně je však dostupná zkompilovaná verze v CSS. JavaScriptové komponenty jsou postavené na knihovně jQuery\footnote{jQuery je JavaScriptová knihovna primárně určená pro dynamické zpracování HTML dokumentů.}.

\subsection{Grid systém a layout}

Grid systém rozděluje horizontální a vertikální prostor webové stránky na individuální části, kde může být umístěn text, nadpisy, obrázky nebo reklamní elementy. Výchozí grid systém Bootstrapu je rozdělen na 12 sloupců s šířkou 940$px$ pro fixní layout.

Pro vytvoření základního layoutu HTML stránky jsou v Bootstrapu definované třídy \texttt{.spanm} a \texttt{.row}, kde $m$ je proměnná definující šířku bloku. Šířku každého bloku \texttt{.spanm} lze vypočítat ze vzorce:

$$940px * \frac{m}{12}$$

Třída \texttt{.row} slouží pouze pro obalení dědičných elementů (příklad \ref{example:basic-layout}).

\begin{example}
    \centering
    \begin{lstlisting}
<div class="row">
    <div class="span9"> ... </div>
    <div class="span3"> ... </div>
</div>
    \end{lstlisting}
    \caption{Základní layout stránky rozdělený na dva sloupce.}
    \label{example:basic-layout}
\end{example}

Pro tvorbu komplexnějšího layoutu slouží třídy \texttt{.offsetm}, které definují odsazení bloku. Proměnná $m$ zde představuje úroveň odsazení.

\subsection{Responzivní design}

Responzivní design je typ dokumentu, který reaguje na své prostředí \cite{responsive-design}. Jedná se o metodu, díky které lze přizpůsobit obsah HTML stránky podle šířky displeje zařízení. Tato technika je v posledních letech populární především díky oblíbenosti mobilních zařízení, nevýhodou je nutnost přenášení vyššího objemu dat mezi klientem a serverem.

V Bootstrapu lze povolit responzivní design deklarací příslušného CSS stylu a meta elementu v hlavičce HTML dokumentu. Implicitně se responzivní layout umí \uv{přizpůsobit} šesti úrovním velikosti displejů.

\subsection{Typografie}

Pro úpravu typografie v Bootstrapu je určen soubor \texttt{variables.less}, kde lze definovat například velikost písma, odstavců nebo řádkování (příklad \ref{example:bootstrap-variables}). Pro zarovnávání textu jsou předdefinované třídy \texttt{.text-left}, \texttt{.text-center} a \texttt{.text-right}.

\begin{example}
    \centering
    \begin{lstlisting}
@baseFontSize:          16px;
@baseFontFamily:        Arial, sans-serif;
@baseLineHeight:        23px;
@altFontFamily:         Georgia, serif;
    \end{lstlisting}
    \caption{Ukázka souboru \texttt{variables.less}.}
    \label{example:bootstrap-variables}
\end{example}

\subsection{Formuláře}

Formuláře lze konstruovat dvěma způsoby. První způsob je omezen na použití elementu \texttt{<form>}, který lze používat libovolným způsobem. Druhý způsob vyžaduje použití třídy \texttt{.form-inline} nebo \texttt{.form-horizontal} definován na elementu \texttt{<form>}; dále je nutné, aby byla u jednotlivých elementů definována správná třída (příklad \ref{example:form}).

\begin{example}
    \centering
    \begin{lstlisting}
<form class="form-inline">
  <input type="text" class="input-small">
  <label class="checkbox">
    <input type="checkbox"> Remember me
  </label>
  <button type="submit" class="btn">Sign in</button>
</form>
    \end{lstlisting}
    \caption{Vertikálně uspořádaný formulář.}
    \label{example:form}
\end{example}

\subsection{Tlačítka}

Styly tlačítek lze aplikovat použitím třídy \texttt{.btn}, typicky na element \texttt{<a>} nebo \texttt{<button>}. Pro sémantické rozlišení akce tlačítka jsou v Bootstrapu určené třídy \texttt{.btn-pirmary}, \texttt{.btn-info}, \texttt{.btn-success}, \texttt{.btn-link}, \texttt{.btn-danger} a \texttt{.btn-warning}, které musí být aplikovány zároveň s třídou \texttt{.btn}.

Pro změnu velikosti tlačítek slouží v Bootstrapu třídy \texttt{.btn-large}, \texttt{.btn-small} a \texttt{.btn-mini}.

\subsection{Navigační panel}

Součástí Bootstrapu je jednoduchý navigační panel. Existují dva způsoby použití tohoto panelu -- fixní a statický, které se liší ve způsobu zobrazení na stránce. Fixní (třída \texttt{.navbar-fixed-top}) je viditelný na celé stránce, naopak statický (třída \texttt{.navbar-static-top}) pouze na úplném počátku stránky.

\begin{example}
    \centering
    \begin{lstlisting}
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner"> ... </div>
</div>
    \end{lstlisting}
    \caption{Fixní navigační panel.}
    \label{example:form}
\end{example}

\subsection{Modální okna}

Modální okna jsou JavaScriptem vykreslené dialogy určené pro zobrazení doplňkových informací nebo komponent stránky (například formulářů), které jsou při běžné práci neviditelné.

\begin{example}
    \centering
    \begin{lstlisting}
<a href="#modal" data-toggle="modal">Open Modal</a>
<div id="modal" class="modal hide fade">
    <div class="modal-header"> ... </div>
    <div class="modal-body"> ... </div>
    <div class="modal-footer"> ... </div>
</div>
    \end{lstlisting}
    \caption{Modální okno.}
    \label{example:form}
\end{example}
